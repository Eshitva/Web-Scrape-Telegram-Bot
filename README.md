# 🧠 Telegram AI Q&A Bot using n8n, Supabase, and Gemini

This project is an n8n workflow that creates an intelligent Telegram bot. The bot scrapes content from a user-shared link and answers natural language questions about it using **Google Gemini** via **LangChain**.

## 🚀 Features

- 🔗 Accepts links via Telegram chat.
- 🧠 Extracts and processes web content using LangChain Agents.
- 🤖 Responds intelligently using Gemini-1.5 LLM.
- 💾 Stores content and user queries in Supabase for reuse and logging.
- 🪵 Logs all user interactions for tracking and debugging.

---

## 🧰 Tech Stack

- **n8n** – Visual automation workflow tool
- **Telegram Bot API** – User interaction interface
- **Supabase** – Data storage (scraped content, user activity, logs)
- **Google Gemini** – LLM used via LangChain
- **LangChain** – AI orchestration
- **JavaScript** – Used in `Function` and `Code` nodes

---

## 🧮 Workflow Overview

```mermaid
graph TD
  A[User sends message on Telegram] --> B{Switch}
  B -- /start --> C[Prompt to send link]
  B -- link --> D[Save user data to Supabase]
  D --> E[Send HTTP request to the link]
  E --> F[Extract content using Gemini Agent]
  F --> G[Store scraped data in Supabase]
  G --> H[Notify user: Now you may ask questions]

  B -- question? --> I[Fetch scraped data from Supabase]
  I --> J[Combine context and question]
  J --> K[Use Gemini Agent to generate answer]
  K --> L[Send response back to Telegram]
💡 How it Works
Telegram Trigger listens for messages.

Switch Node routes:

/start → prompts user to send a link.

a valid link → saves user and URL, scrapes and processes content.

a valid question ending in ? → uses stored data to answer the query.

LangChain Agents with Gemini:

One agent extracts data from the webpage.

Another answers the user's question.

Supabase is used to:

Store scraped content.

Store user metadata and logs.

Logging throughout to help with debugging and analytics.

📦 Supabase Tables Used

Table Name	Purpose
user_data	Stores user ID and their latest link
scraped_data	Stores scraped content for each URL
logs	Stores logs of Telegram interactions
🧑‍💻 Setup Instructions
1. Clone the Repo
bash
Copy
Edit
git clone https://github.com/yourusername/telegram-gemini-n8n-bot.git
2. Setup Supabase
Create a Supabase project.

Make tables: user_data, scraped_data, and logs.

Grab your API key and URL.

3. Configure Telegram Bot
Create a Telegram Bot via @BotFather.

Note down your Bot Token and set it in n8n credentials.

4. Connect n8n Nodes
Import the My_workflow.json file into n8n.

Configure all credentials:

Telegram API

Supabase API

Gemini API (via LangChain)

🧠 Example Conversation
pgsql
Copy
Edit
User: /start
Bot: Please send the link you want to ask questions from.

User: https://en.wikipedia.org/wiki/Artificial_intelligence
Bot: Now you may ask questions from the website.

User: What are the main applications of AI?
Bot: [Response generated by Gemini using scraped content]
📓 Notes
Ensure the URL shared by the user returns readable text.

The workflow expects questions to end with a ?.

Responses are generated based on the most recent scraped link from the user.
